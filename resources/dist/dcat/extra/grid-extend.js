(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}var n=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(r=[{key:"getChildren",value:function(t,e){var r,n=this,o=[],i=!1;return t.each((function(t,a){n.isTr(a)&&!i&&(r||(r=$(a)),r&&!n.isChildren(e,r)||(n.isChildren(e,a)?o.push(a):i=!0))})),o}},{key:"swapable",value:function(t,e){if(t&&t.length&&e===this.getDepth(t))return!0}},{key:"sibling",value:function(t,e){var r,n=this;return t.each((function(t,o){n.getDepth(o)===e&&!r&&n.isTr(o)&&(r=$(o))})),r}},{key:"isChildren",value:function(t,e){return this.getDepth(e)>this.getDepth(t)}},{key:"getDepth",value:function(t){return parseInt($(t).data("depth")||0)}},{key:"isTr",value:function(t){return"tr"===$(t).prop("tagName").toLocaleLowerCase()}}])&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}var l=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend({button:null,table:null,url:"",perPage:"",showNextPage:"",pageQueryName:"",parentIdQueryName:"",depthQueryName:"",showIcon:"fa-angle-right",hideIcon:"fa-angle-down",loadMoreIcon:'<i class="feather icon-more-horizontal"></i>'},r),this.helper=e,this.key=this.depth=this.row=this.data=this._req=null,this._init()},(e=[{key:"_init",value:function(){var t=this,e=t.options;$(e.button).off("click").click((function(){if(!t._req){var r=$(this),n=$("i",this),o=n.hasClass(e.showIcon);t.key=r.data("key"),t.depth=r.data("depth"),t.row=r.closest("tr"),"0"==r.data("inserted")&&(t.request(1),r.data("inserted",1)),n.toggleClass(e.showIcon+" "+e.hideIcon);var i=[];t.helper.getChildren(t.row.nextAll(),t.row).forEach((function(e){t.helper.getDepth(e)===t.depth+1&&(i.push(e),o?$(e).show():$(e).hide())})),i.forEach((function(r){if(!o){var n=$(r).find("a[data-depth="+t.helper.getDepth(r)+"] i");n.hasClass(e.hideIcon)&&n.parent().click()}}))}}))}},{key:"request",value:function(t,e){var r=this,n=r.row,o=r.key,i=r.depth,a=r.options.table;if(!r._req){r._req=1,Dcat.loading();var l={};l[r.options.parentIdQueryName]=o,l[r.options.depthQueryName]=i+1,l[r.options.pageQueryName.replace(":key",o)]=t,$.ajax({url:r.options.url,type:"GET",data:l,headers:{"X-PJAX":!0},success:function(o){e&&e(),Dcat.loading(!1),r._req=0;var l=r.helper.getChildren(n.nextAll(),n);n=l.length?$(l.pop()):n;var u=$("<div>"+o+"</div>"),c=u.find(a+" tbody"),f=u.find("last-page").text(),s=u.find("next-page").text();if(c.find("tr").each((function(t,e){$(e).attr("data-depth",i+1)})),r.options.showNextPage&&c.find("tr").length==r.options.perPage&&f>=t){var p=$('<tr data-depth="'.concat(i+1,'" data-page="').concat(s,'">\n                                <td colspan="').concat(n.find("td").length,'" align="center" style="cursor: pointer">\n                                    <a href="#" style="font-size: 1.5rem">').concat(r.options.loadMoreIcon,"</a>\n                                </td>\n                            </tr>"));n.after(p),p.click((function(){var t=$(this);r.request(t.data("page"),(function(){t.remove()}))}))}n.after(c.html()),u.find("script").each((function(t,e){n.after(e)})),$("body .extra-html").append(u.find(".extra-html").html()),Dcat.triggerReady()},error:function(t,n,o){e&&e(),Dcat.loading(!1),r._req=0,404!=t.status&&Dcat.handleAjaxError(t,n,o)}})}}}])&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}var s=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend({button:null,url:""},r),this.helper=e,this.direction=this.key=this.depth=this.row=this._req=null,this._init()},(e=[{key:"_init",value:function(){var t=this;$(t.options.button).off("click").click((function(){if(!t._req){t._req=1,Dcat.loading();var e=$(this);t.key=e.data("id"),t.direction=e.data("direction"),t.row=e.closest("tr"),t.depth=t.helper.getDepth(t.row),t.request()}}))}},{key:"request",value:function(){var t=this,e=t.helper,r=t.key,n=t.row,o=t.depth,i=t.direction,a=n.prevAll(),l=n.nextAll(),u=n.prevAll("tr").first(),c=n.nextAll("tr").first();$.put({url:t.options.url.replace(":key",r),data:{_orderable:i},success:function(r){if(Dcat.loading(!1),t._req=0,!r.status)return r.data.message&&Dcat.warning(r.data.message);if(Dcat.success(r.data.message),i){var f=e.sibling(a,o);e.swapable(f,o)&&u.length&&e.getDepth(u)>=o&&(f.before(n),e.getChildren(l,n).forEach((function(t){f.before(t)})))}else{var s=e.sibling(l,o),p=s?e.getChildren(s.nextAll(),s):[];if(e.swapable(s,o)&&c.length&&e.getDepth(c)>=o){l=n.nextAll(),p.length&&(s=$(p.pop()));var h=[];e.getChildren(l,n).forEach((function(t){h.unshift(t)})),h.forEach((function(t){s.after(t)})),s.after(n)}}},error:function(e,r,n){t._req=0,Dcat.loading(!1),Dcat.handleAjaxError(e,r,n)}})}}])&&c(t.prototype,e),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function d(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}var y=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=$.extend({container:".table-card"},e);var r=this;$(this.options.container).on("table:load",(function(){r.load($(this).data("url"),$(this))}))},(e=[{key:"load",value:function(t,e){var r=this;t&&(e.attr("data-current",t),e.loading({background:"transparent!important"}),Dcat.helpers.asyncRender(t,(function(t){e.loading(!1),e.html(t),r.bind(e),e.trigger("table:loaded")})))}},{key:"bind",value:function(t){var e=this;function r(){return e.load($(this).attr("href"),t),!1}t.find(".pagination .page-link").on("click",r),t.find(".grid-column-header a").on("click",r),t.find("form").on("submit",(function(){return e.load($(this).attr("action")+"&"+$(this).serialize(),t),!1})),t.find(".filter-box .reset").on("click",r),t.find(".grid-selector a").on("click",r),Dcat.ready((function(){setTimeout((function(){t.find(".grid-refresh").off("click").on("click",(function(){return e.load(t.data("current"),t),!1}))}),10)}))}}])&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();!function(t){var e=t.Dcat,r=new n;e.grid.Tree=function(t){return new l(r,t)},e.grid.Orderable=function(t){return new s(r,t)},e.grid.AsyncTable=function(t){return new y(t)}}(window,jQuery)})();
//# sourceMappingURL=grid-extend.js.map